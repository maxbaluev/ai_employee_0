[
  {
    "name": "gb-ranking-01-marketing-campaign",
    "initial_session": {
      "app_name": "control_plane_foundation",
      "user_id": "eval_gb_marketing",
      "state": {
        "mission_context": {
          "mission_id": "11111111-1111-1111-1111-111111111101",
          "tenant_id": "00000000-0000-0000-0000-000000000000",
          "objective": "Analyze Q4 paid campaign performance and identify top-converting channels",
          "audience": "Marketing team",
          "timeframe": "Next 7 days",
          "guardrails": [
            "Maintain professional tone",
            "Include attribution data"
          ],
          "metadata": {
            "persona": "marketing"
          },
          "mode": "dry_run"
        }
      }
    },
    "metadata": {
      "expected_outcomes": {
        "candidate_count": 3,
        "top_play_persona": "marketing",
        "min_similarity": 0.62,
        "required_toolkit_hints": [
          "google_analytics",
          "hubspot"
        ],
        "max_latency_ms": 2500
      },
      "assertions": [
        "len(ranked_plays) >= 3",
        "ranked_plays[0]['telemetry']['persona'] == 'marketing'",
        "ranked_plays[0]['telemetry']['similarity'] >= 0.62",
        "any(toolkit in ranked_plays[0]['toolkit_refs'] for toolkit in ['google_analytics', 'hubspot', 'google_ads'])"
      ]
    },
    "data": [
      {
        "query": "Run the Gate G-B planner ranking scenario for marketing campaign ROI analysis and report planner telemetry.",
        "expected_tool_use": [],
        "expected_intermediate_agent_responses": [],
        "reference": "Planner ranking completed for marketing mission."
      }
    ]
  },
  {
    "name": "gb-ranking-02-support-churn-risk",
    "initial_session": {
      "app_name": "control_plane_foundation",
      "user_id": "eval_gb_support",
      "state": {
        "mission_context": {
          "mission_id": "11111111-1111-1111-1111-111111111102",
          "tenant_id": "00000000-0000-0000-0000-000000000000",
          "objective": "Draft safeguarded responses for high-priority tickets flagged for churn risk",
          "audience": "Customer support team",
          "timeframe": "Next 2 hours",
          "guardrails": [
            "Keep tone warm-professional",
            "Respect quiet hours"
          ],
          "metadata": {
            "persona": "support"
          },
          "mode": "dry_run"
        }
      }
    },
    "metadata": {
      "expected_outcomes": {
        "candidate_count": 3,
        "top_play_persona": "support",
        "min_similarity": 0.65,
        "required_toolkit_hints": [
          "zendesk",
          "intercom"
        ],
        "max_latency_ms": 2500
      },
      "assertions": [
        "len(ranked_plays) >= 3",
        "ranked_plays[0]['telemetry']['persona'] == 'support'",
        "ranked_plays[0]['telemetry']['similarity'] >= 0.65",
        "any(toolkit in ranked_plays[0]['toolkit_refs'] for toolkit in ['zendesk', 'intercom', 'slack'])"
      ]
    },
    "data": [
      {
        "query": "Run the Gate G-B planner ranking scenario for churn-risk support responses and surface planner telemetry.",
        "expected_tool_use": [],
        "expected_intermediate_agent_responses": [],
        "reference": "Planner ranking completed for support mission."
      }
    ]
  },
  {
    "name": "gb-ranking-03-revenue-ops-pipeline",
    "initial_session": {
      "app_name": "control_plane_foundation",
      "user_id": "eval_gb_revops",
      "state": {
        "mission_context": {
          "mission_id": "11111111-1111-1111-1111-111111111103",
          "tenant_id": "00000000-0000-0000-0000-000000000000",
          "objective": "Assess Salesforce pipeline hygiene and flag stale deals for cleanup",
          "audience": "Revenue operations team",
          "timeframe": "Next 14 days",
          "guardrails": [
            "Maintain professional tone",
            "Document undo steps"
          ],
          "metadata": {
            "persona": "revenue-ops"
          },
          "mode": "dry_run"
        }
      }
    },
    "metadata": {
      "expected_outcomes": {
        "candidate_count": 3,
        "top_play_persona": "revenue-ops",
        "min_similarity": 0.6,
        "required_toolkit_hints": [
          "salesforce",
          "outreach"
        ],
        "max_latency_ms": 2500
      },
      "assertions": [
        "len(ranked_plays) >= 3",
        "ranked_plays[0]['telemetry']['persona'] in ['revenue-ops', 'ops']",
        "ranked_plays[0]['telemetry']['similarity'] >= 0.6",
        "any(toolkit in ranked_plays[0]['toolkit_refs'] for toolkit in ['salesforce', 'outreach', 'gong'])"
      ]
    },
    "data": [
      {
        "query": "Run the Gate G-B planner ranking scenario for revenue-ops pipeline hygiene and surface planner telemetry.",
        "expected_tool_use": [],
        "expected_intermediate_agent_responses": [],
        "reference": "Planner ranking completed for revenue-ops mission."
      }
    ]
  },
  {
    "name": "gb-ranking-04-sales-renewal-risk",
    "initial_session": {
      "app_name": "control_plane_foundation",
      "user_id": "eval_gb_sales",
      "state": {
        "mission_context": {
          "mission_id": "11111111-1111-1111-1111-111111111104",
          "tenant_id": "00000000-0000-0000-0000-000000000000",
          "objective": "Flag at-risk renewals and generate retention offers with escalation paths",
          "audience": "Enterprise sales team",
          "timeframe": "Next 30 days",
          "guardrails": [
            "Maintain executive-level tone",
            "Include ROI justification"
          ],
          "metadata": {
            "persona": "sales"
          },
          "mode": "dry_run"
        }
      }
    },
    "metadata": {
      "expected_outcomes": {
        "candidate_count": 3,
        "top_play_persona": "sales",
        "min_similarity": 0.63,
        "required_toolkit_hints": [
          "salesforce",
          "gainsight"
        ],
        "max_latency_ms": 2500
      },
      "assertions": [
        "len(ranked_plays) >= 3",
        "ranked_plays[0]['telemetry']['persona'] == 'sales'",
        "ranked_plays[0]['telemetry']['similarity'] >= 0.63",
        "any(toolkit in ranked_plays[0]['toolkit_refs'] for toolkit in ['salesforce', 'gainsight', 'slack'])"
      ]
    },
    "data": [
      {
        "query": "Run the Gate G-B planner ranking scenario for renewal risk and surface planner telemetry.",
        "expected_tool_use": [],
        "expected_intermediate_agent_responses": [],
        "reference": "Planner ranking completed for sales mission."
      }
    ]
  },
  {
    "name": "gb-ranking-05-technical-incident",
    "initial_session": {
      "app_name": "control_plane_foundation",
      "user_id": "eval_gb_technical",
      "state": {
        "mission_context": {
          "mission_id": "11111111-1111-1111-1111-111111111105",
          "tenant_id": "00000000-0000-0000-0000-000000000000",
          "objective": "Compile incident timeline and root cause analysis from logs and Slack threads",
          "audience": "Engineering team",
          "timeframe": "Next 4 hours",
          "guardrails": [
            "Include remediation actions",
            "Document timeline accurately"
          ],
          "metadata": {
            "persona": "technical"
          },
          "mode": "dry_run"
        }
      }
    },
    "metadata": {
      "expected_outcomes": {
        "candidate_count": 3,
        "top_play_persona": "technical",
        "min_similarity": 0.64,
        "required_toolkit_hints": [
          "pagerduty",
          "slack",
          "datadog"
        ],
        "max_latency_ms": 2500
      },
      "assertions": [
        "len(ranked_plays) >= 3",
        "ranked_plays[0]['telemetry']['persona'] == 'technical'",
        "ranked_plays[0]['telemetry']['similarity'] >= 0.64",
        "any(toolkit in ranked_plays[0]['toolkit_refs'] for toolkit in ['pagerduty', 'slack', 'datadog'])"
      ]
    },
    "data": [
      {
        "query": "Run the Gate G-B planner ranking scenario for technical incident postmortem drafts and surface planner telemetry.",
        "expected_tool_use": [],
        "expected_intermediate_agent_responses": [],
        "reference": "Planner ranking completed for technical mission."
      }
    ]
  },
  {
    "name": "gb-ranking-06-fallback-scenario",
    "initial_session": {
      "app_name": "control_plane_foundation",
      "user_id": "eval_gb_fallback",
      "state": {
        "mission_context": {
          "mission_id": "11111111-1111-1111-1111-111111111106",
          "tenant_id": "00000000-0000-0000-0000-000000000000",
          "objective": "Handle edge case with no matching library entries",
          "audience": "Generic team",
          "timeframe": "Next 7 days",
          "guardrails": [
            "Maintain professional tone"
          ],
          "metadata": {
            "persona": "unknown"
          },
          "mode": "dry_run"
        }
      }
    },
    "metadata": {
      "expected_outcomes": {
        "candidate_count": 1,
        "fallback_generated": true,
        "min_confidence": 0.4,
        "max_latency_ms": 2500
      },
      "assertions": [
        "len(ranked_plays) >= 1",
        "ranked_plays[0]['telemetry'].get('fallback') == True or ranked_plays[0]['confidence'] <= 0.70"
      ]
    },
    "data": [
      {
        "query": "Run the Gate G-B planner ranking fallback scenario when no library matches and surface planner telemetry.",
        "expected_tool_use": [],
        "expected_intermediate_agent_responses": [],
        "reference": "Planner ranking completed for fallback mission."
      }
    ]
  },
  {
    "name": "gb-ranking-07-confidence-scoring",
    "initial_session": {
      "app_name": "control_plane_foundation",
      "user_id": "eval_gb_confidence",
      "state": {
        "mission_context": {
          "mission_id": "11111111-1111-1111-1111-111111111107",
          "tenant_id": "00000000-0000-0000-0000-000000000000",
          "objective": "Validate confidence scores align with similarity and position",
          "audience": "Marketing team",
          "timeframe": "Next 7 days",
          "guardrails": [
            "Maintain professional tone"
          ],
          "metadata": {
            "persona": "marketing"
          },
          "mode": "dry_run"
        }
      }
    },
    "metadata": {
      "expected_outcomes": {
        "candidate_count": 3,
        "confidence_range": [
          0.4,
          0.95
        ],
        "confidence_decreasing": true
      },
      "assertions": [
        "len(ranked_plays) >= 3",
        "all(0.40 <= play['confidence'] <= 0.95 for play in ranked_plays)",
        "ranked_plays[0]['confidence'] >= ranked_plays[1]['confidence']",
        "ranked_plays[1]['confidence'] >= ranked_plays[2]['confidence']"
      ]
    },
    "data": [
      {
        "query": "Run the Gate G-B planner ranking confidence calibration scenario and surface planner telemetry.",
        "expected_tool_use": [],
        "expected_intermediate_agent_responses": [],
        "reference": "Planner ranking completed for confidence mission."
      }
    ]
  },
  {
    "name": "gb-ranking-08-telemetry-completeness",
    "initial_session": {
      "app_name": "control_plane_foundation",
      "user_id": "eval_gb_telemetry",
      "state": {
        "mission_context": {
          "mission_id": "11111111-1111-1111-1111-111111111108",
          "tenant_id": "00000000-0000-0000-0000-000000000000",
          "objective": "Ensure all telemetry fields are populated correctly",
          "audience": "Customer support team",
          "timeframe": "Next 7 days",
          "guardrails": [
            "Maintain professional tone"
          ],
          "metadata": {
            "persona": "support"
          },
          "mode": "dry_run"
        }
      }
    },
    "metadata": {
      "expected_outcomes": {
        "required_telemetry_fields": [
          "library_entry_id",
          "similarity",
          "success_score",
          "persona"
        ]
      },
      "assertions": [
        "len(ranked_plays) >= 3",
        "all('library_entry_id' in play['telemetry'] or play['telemetry'].get('fallback') for play in ranked_plays)",
        "all('similarity' in play['telemetry'] for play in ranked_plays)",
        "all(isinstance(play['telemetry']['similarity'], (int, float)) for play in ranked_plays)"
      ]
    },
    "data": [
      {
        "query": "Run the Gate G-B planner ranking telemetry completeness scenario and surface planner telemetry.",
        "expected_tool_use": [],
        "expected_intermediate_agent_responses": [],
        "reference": "Planner ranking completed for telemetry mission."
      }
    ]
  },
  {
    "name": "gb-ranking-09-undo-plan-presence",
    "initial_session": {
      "app_name": "control_plane_foundation",
      "user_id": "eval_gb_undo",
      "state": {
        "mission_context": {
          "mission_id": "11111111-1111-1111-1111-111111111109",
          "tenant_id": "00000000-0000-0000-0000-000000000000",
          "objective": "Verify undo plans are present and non-empty",
          "audience": "Revenue operations team",
          "timeframe": "Next 14 days",
          "guardrails": [
            "Document undo steps"
          ],
          "metadata": {
            "persona": "revenue-ops"
          },
          "mode": "dry_run"
        }
      }
    },
    "metadata": {
      "expected_outcomes": {
        "all_plays_have_undo": true
      },
      "assertions": [
        "len(ranked_plays) >= 3",
        "all('undo_plan' in play and play['undo_plan'] for play in ranked_plays)",
        "all(len(play['undo_plan']) >= 10 for play in ranked_plays)"
      ]
    },
    "data": [
      {
        "query": "Run the Gate G-B planner ranking undo plan scenario and surface planner telemetry.",
        "expected_tool_use": [],
        "expected_intermediate_agent_responses": [],
        "reference": "Planner ranking completed for undo readiness mission."
      }
    ]
  },
  {
    "name": "gb-ranking-10-streaming-telemetry",
    "initial_session": {
      "app_name": "control_plane_foundation",
      "user_id": "eval_gb_streaming",
      "state": {
        "mission_context": {
          "mission_id": "11111111-1111-1111-1111-111111111110",
          "tenant_id": "00000000-0000-0000-0000-000000000000",
          "objective": "Validate streaming events for planner stages",
          "audience": "Sales team",
          "timeframe": "Next 7 days",
          "guardrails": [
            "Maintain professional tone"
          ],
          "metadata": {
            "persona": "sales"
          },
          "mode": "dry_run"
        }
      }
    },
    "metadata": {
      "expected_outcomes": {
        "required_events": [
          "planner_stage_started",
          "planner_status",
          "planner_rank_complete"
        ]
      },
      "assertions": [
        "telemetry_events_emitted",
        "'planner_stage_started' in emitted_event_types",
        "'planner_rank_complete' in emitted_event_types"
      ]
    },
    "data": [
      {
        "query": "Run the Gate G-B planner ranking streaming telemetry scenario and surface planner telemetry.",
        "expected_tool_use": [],
        "expected_intermediate_agent_responses": [],
        "reference": "Planner ranking completed with streaming telemetry captured."
      }
    ]
  }
]
